<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MayaMind</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background: #0a0a10;
      color: #e0e0e0;
      font-family: system-ui, -apple-system, sans-serif;
      height: 100dvh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* â”€â”€ Avatar canvas â”€â”€ */
    #avatar {
      flex: 1;
      width: 100%;
      min-height: 0;
      position: relative;
    }
    #avatar canvas { width: 100% !important; height: 100% !important; }

    /* Loading overlay */
    #loading {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0a0a10;
      color: #555;
      font-size: 14px;
      z-index: 10;
      transition: opacity 0.6s;
    }
    #loading.hidden { opacity: 0; pointer-events: none; }

    /* â”€â”€ Bottom HUD â”€â”€ */
    #hud {
      background: linear-gradient(to top, #0a0a10, rgba(10,10,16,0.92));
      padding: 10px 16px 14px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      max-height: 28vh;
      flex-shrink: 0;
    }

    /* â”€â”€ Status bar â”€â”€ */
    #status-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    #status-left {
      display: flex;
      align-items: center;
      gap: 8px;
      flex: 1;
    }

    /* Pulsing state dot */
    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      flex-shrink: 0;
      background: #444;
    }

    .dot.loading    { background: #555; }

    .dot.listening  {
      background: #4caf50;
      animation: pulse-green 1.6s ease-in-out infinite;
    }

    .dot.processing {
      background: #ff9800;
      animation: pulse-amber 0.8s ease-in-out infinite;
    }

    .dot.speaking   {
      background: #2196f3;
      animation: pulse-blue 1s ease-in-out infinite;
    }

    @keyframes pulse-green {
      0%, 100% { box-shadow: 0 0 0 0 rgba(76,175,80,0.6); }
      50%       { box-shadow: 0 0 0 6px rgba(76,175,80,0); }
    }
    @keyframes pulse-amber {
      0%, 100% { box-shadow: 0 0 0 0 rgba(255,152,0,0.6); }
      50%       { box-shadow: 0 0 0 5px rgba(255,152,0,0); }
    }
    @keyframes pulse-blue {
      0%, 100% { box-shadow: 0 0 0 0 rgba(33,150,243,0.6); }
      50%       { box-shadow: 0 0 0 5px rgba(33,150,243,0); }
    }

    #status-text {
      font-size: 12px;
      color: #777;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    /* Mute button */
    #mute-btn {
      background: transparent;
      border: 1px solid #333;
      border-radius: 20px;
      color: #888;
      cursor: pointer;
      font-size: 16px;
      padding: 4px 10px;
      transition: border-color 0.2s, color 0.2s;
      flex-shrink: 0;
    }
    #mute-btn:hover:not(:disabled) { border-color: #555; color: #bbb; }
    #mute-btn.muted  { border-color: #8a1a1a; color: #e57373; }
    #mute-btn:disabled { opacity: 0.3; cursor: not-allowed; }

    /* â”€â”€ Transcript â”€â”€ */
    #transcript {
      overflow-y: auto;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 5px;
      font-size: 13px;
      min-height: 0;
    }

    .msg {
      padding: 5px 10px;
      border-radius: 8px;
      max-width: 85%;
      line-height: 1.45;
    }
    .msg.user      { background: #1e1e2e; color: #aaa; align-self: flex-end; }
    .msg.assistant { background: #0d2a45; color: #7db8e8; align-self: flex-start; }
    .msg.interim   { opacity: 0.5; font-style: italic; }
  </style>
</head>
<body>

  <div id="avatar">
    <div id="loading">Loading avatarâ€¦</div>
  </div>

  <div id="hud">
    <div id="status-bar">
      <div id="status-left">
        <div id="status-dot" class="dot loading"></div>
        <span id="status-text">Initializingâ€¦</span>
      </div>
      <button id="mute-btn" disabled title="Mute mic">ðŸŽ¤</button>
    </div>
    <div id="transcript"></div>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
